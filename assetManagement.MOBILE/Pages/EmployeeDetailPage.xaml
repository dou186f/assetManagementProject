<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="assetManagement.MOBILE.Pages.EmployeeDetailPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:assetManagement.MOBILE.ViewModels"
    x:DataType="viewmodels:EmployeeDetailViewModel"
    Title="">

    <Shell.TitleView>
        <Grid ColumnDefinitions="Auto,*">
            <Label Text="Employee Detail"
                   FontFamily="Uregu"
                   FontSize="18"
                   FontAttributes="Bold"
                   VerticalTextAlignment="Center"/>
        </Grid>
    </Shell.TitleView>
    
    <ScrollView Padding="0, 48, 0, 0">
        <VerticalStackLayout Spacing="12">
            <Label Text="{Binding Employee.name}"
                   Padding="32, 0, 32, 0"
                   FontSize="32"
                   HorizontalOptions="Center"
                   FontAttributes="Bold" />

            <BoxView HeightRequest="3"
                     WidthRequest="320"
                     BackgroundColor="{AppThemeBinding Light=#141414, Dark=#2C2C2E}" />

            <Label Margin="48, 12, 0, 0">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="Registry Number: " FontSize="18" FontAttributes="Bold"/>
                        <Span Text="{Binding Employee.regiNumber}" FontSize="18"/>
                    </FormattedString>
                </Label.FormattedText>
            </Label>

            <BoxView HeightRequest="1"
                     WidthRequest="320"
                     BackgroundColor="{AppThemeBinding Light=#E5E5EA, Dark=#2C2C2E}" />

            <Label Margin="48, 0, 0, 0">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="Department: " FontSize="18" FontAttributes="Bold"/>
                        <Span Text="{Binding DepartmentName}" FontSize="18"/>
                    </FormattedString>
                </Label.FormattedText>
            </Label>

            <BoxView HeightRequest="1"
                     WidthRequest="320"
                     BackgroundColor="{AppThemeBinding Light=#E5E5EA, Dark=#2C2C2E}" />

            <Label Margin="48, 0, 0, 0">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="ID: " FontSize="18" FontAttributes="Bold"/>
                        <Span Text="{Binding Employee.id}" FontSize="18"/>
                    </FormattedString>
                </Label.FormattedText>
            </Label>

            <Button Text="Assign A Department" Command="{Binding ToggleAdderCommand}" CornerRadius="4" WidthRequest="180" FontFamily="Uregu"/>
            
            <Border Grid.Row="5"
                Margin="8"
                StrokeThickness="0"
                IsVisible="{Binding IsAdderVisible}"
                BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#1E1E1E}"
                Padding="12">
                <Frame Margin="32,12" Padding="16"
                 HasShadow="False"
                 BorderColor="{AppThemeBinding Light=#E5E5EA, Dark=#2C2C2E}"
                 CornerRadius="12">
                    <VerticalStackLayout Spacing="10">
                        <Picker Title="Choose Department:"
                                HorizontalOptions="Center"
                                ItemsSource="{Binding Departments}"
                                ItemDisplayBinding="{Binding name}"
                                SelectedItem="{Binding SelectedDepartment}" />

                        <HorizontalStackLayout Spacing="8" HorizontalOptions="Center">
                            <Button Text="Add to Department"
                                    CornerRadius="4"
                                    Command="{Binding AddToDepartmentCommand}" />

                            <Button Text="Leave the Department"
                                    CornerRadius="4"
                                    Command="{Binding RemoveFromDepartmentCommand}" />
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </Frame>
            </Border>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
